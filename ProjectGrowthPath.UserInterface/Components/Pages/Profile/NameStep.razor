@using ProjectGrowthPath.Application.Service
@using System.ComponentModel.DataAnnotations
@inject FirstTimeSetupService SetupService

<EditForm Model="model" OnValidSubmit="Submit">
    <DataAnnotationsValidator />
    <ValidationSummary />
    <InputText @bind-Value="model.Name" placeholder="Je naam" class="form-control" />
    <button type="submit">Volgende</button>
</EditForm>

@code {
    [Parameter] public EventCallback OnNext { get; set; }

    private NameStepModel model = new();

    private async Task Submit()
    {
        await SetupService.UpdateNameAsync(model.Name);
        if (OnNext.HasDelegate)
            await OnNext.InvokeAsync();
    }

    private class NameStepModel
    {
        [Required(ErrorMessage = "Naam is verplicht")]
        public string Name { get; set; } = string.Empty;
    }
}